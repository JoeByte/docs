## 架构图
游戏平台架构图示

![diagram](https://raw.githubusercontent.com/hetugm/docs/master/assets/diagram.png "架构图")


## 一．  架构概述
##### 管理平台架构  
1. TOP 登录授权中心  
2. BI数据分析系统  
3. BOSS商业运营支撑系统（集成通用功能）  
4. AOS辅助运营系统（针对特殊游戏需求开发）  

___

##### 业务平台架构  
1. Account账户中心  
2. Trade支付中心（可选增加队列）  
3. 服务接口API（活动,公告等; 通过RPC管理）  
4. 统计接口Stats（按游戏分表,10s超时）  
5. RPC远程调用服务（随游戏部署）  

___

##### 其他  
1. 日志收集架构  
2. 风控系统  
3. 审计管理系统  


## 二．  命名部署规范

##### 命名规范：  
* 游戏命名规则：HT_haizei, JL_phs ，大写厂商缩写  
* 版本命名规则：zh_CN, en_US, zh_TW  
* 游戏ID：1001001，1-3位代表游戏，4-7位为自增ID  

##### 部署规范：  
* RPC: 每个游戏的每个版本部署一份 1001001.rpc.example.com  
* API: 每个游戏的每个版本部署一份 1001001.api.example.com  
* AOS: 每款游戏 搭建一套（仅针对特殊需求游戏）cp_game.aos.example.com  
* 使用非平台账号的游戏(联运厂商部分)每个版本需要单独搭建一套 1001001.account.example.com  


## 三．  系统需求分解(简要内容)

##### BOSS系统（db_boss，大多数通讯使用接口）  
* 运营管理
    * 玩家查询（补发管理: 站内邮件，其他属性，补发记录）
    * 黑名单
    * 团体组织 (待定)
* 活动管理
    * 公告管理: 弹窗, 滚屏
    * 活动管理: 储值活动，消费活动，登录活动，经验EXP类活动
    * 信息完善: 奖励
    * 签到
    * 邀请
* 产品信息
    * 订单管理
    * 礼品卡
    * 充值排行
    * 等级分布(待定)
* 内容管理
    * 商品管理: 按网关和货币分组, 按产品id排序
    * 服务器管理: 管理以及服务器概况
    * 软件包管理(待定)
* 设置
    * 支付方式: 付费类型,网关,子网关,支持的货币,name,remark,tips,sandbox,parent,sort
    * 时区设置

___

##### BI系统：前期分析力度到版本（db_bi，二期分析游戏相关）  
* 平台概况：所有游戏概况 （后期工作）
* 统计报告
    * 实时数据：按小时 实时查询
    * 每日概况：按日统计;新增,活跃,付费总额,ARPU,ARPPU,付费率,登录次数,累计账号(图)
    * 每周概况：按周统计
    * 每月概况：按月统计
* 数据分析
	* 用户价值LTV
	* 付费分析（新增付费账号数,付费账号数,付费次数,付费总额,付费率,ARPU,ARPPU）
	* 区域分析
* 参与和留存
    * 新增分析
    * 活跃分析
	* 用户留存
* 游戏分析（角色级分析）
    * 新增用户
    * 活跃用户
* 事件分析
    * 事件数据（计数事件[各属性被触发的次数], 计算事件[统计数值型变量的值的分布]）
    * 事件管理
* 设置
	* 数据订阅：邮件订阅 
    * 预警通知

___

##### 统计接口Stats（db_stats、加一层数据清洗）  
创建角色  
角色登录  
事件统计 event  

___

##### 服务接口接口API (db_service)  
公告  
活动  
投票  
签到  
信息完善活动：绑定手机，绑定facebook  

